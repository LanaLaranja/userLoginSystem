<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${article.id} != null ? 'Edit Article' : 'New Article'">Article</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        /* small form tweaks for admin */
        .admin-form .form-row { margin-bottom: 14px; }
        .admin-actions { display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }
        .admin-actions .btn-secondary { background:transparent; border:1px solid #e7d7de; color:#333; padding:10px 12px; border-radius:8px; }
    </style>
</head>
<body>
    <header th:replace="fragments/navbar :: navbar"></header>

    <main class="container articles-container">
        <div class="page-header">
            <div>
                <h1 th:text="${article.id} != null ? 'Edit Article' : 'Create Article'">Create Article</h1>
                <p class="muted">Add or edit articles for the site</p>
            </div>
        </div>

        <section class="article-card admin-form">
            <form th:action="@{/admin/articles/save}" th:object="${article}" method="post">
                <input type="hidden" th:field="*{id}">

                <div class="form-row inputbox">
                    <label for="title">Title</label>
                    <input id="title" type="text" th:field="*{title}" placeholder="Article title" required>
                </div>

                <div class="form-row inputbox">
                    <label for="content">Content</label>
                    <textarea id="content" th:field="*{content}" rows="8" placeholder="Write the article content here" required style="width:100%;padding:12px;border-radius:10px;border:1px solid #e7d7de;"></textarea>
                </div>

                <div class="form-row inputbox">
                    <label for="keywords">Keywords (comma separated)</label>
                    <input id="keywords" type="text" th:field="*{keywords}" placeholder="e.g. java,spring,thymeleaf">
                </div>

                <div class="form-row inputbox">
                    <label for="category">Category</label>
                    <select id="category" th:field="*{category.id}" style="padding:10px;border-radius:8px;border:1px solid #e7d7de;width:100%;">
                        <option th:each="c : ${categories}" th:value="${c.id}" th:text="${c.name}">Category</option>
                    </select>
                </div>

                <div class="form-row">
                    <label>
                        <!-- Hidden field ensures a value is always submitted when checkbox is unchecked -->
                        <input type="hidden" name="visible" value="false" />
                        <input type="checkbox" th:field="*{visible}"> Visible
                    </label>
                </div>

                <div class="admin-actions">
                    <a th:href="@{/admin}" class="btn btn-secondary">Cancel</a>
                    <button type="submit" class="btn">Save Article</button>
                </div>
            </form>
        </section>
    </main>

    <section th:replace="fragments/footer :: siteFooter"></section>
</body>
</html>
